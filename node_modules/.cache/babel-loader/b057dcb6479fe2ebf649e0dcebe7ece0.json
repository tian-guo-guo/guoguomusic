{"remainingRequest":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\playlist.vue","mtime":1583206817097},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHBsYXlsaXN0RGV0YWlsLCBsaXN0Q29tbWVudHMsIGhvdENvbW1lbnRzIH0gZnJvbSAnQC9hcGkvcGxheWxpc3QnOwppbXBvcnQgeyBzb25nVXJsIH0gZnJvbSAnQC9hcGkvZGlzY292ZXJ5JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3BsYXlsaXN0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlSW5kZXg6ICcxJywKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdGl0bGU6ICcnLAogICAgICBhdmF0YXJVcmw6ICcnLAogICAgICBjb3ZlckltZ1VybDogJycsCiAgICAgIHNpZ25hdHVyZTogJycsCiAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgdGFnczogW10sCiAgICAgIGNyZWF0ZVRpbWU6ICcnLAogICAgICAvLyDng63pl6jor4TorroKICAgICAgaG90Q29tbWVudHM6IFtdLAogICAgICAvLyDmma7pgJror4TorroKICAgICAgY29tbWVudHM6IFtdLAogICAgICAvLyDliIbpobXnm7jlhbPmlbDmja4KICAgICAgLy8g5q+P6aG15pWw5o2uCiAgICAgIGxpbWl0OiAyMCwKICAgICAgLy8g6aG156CBCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMAogICAgfTsKICB9LAogIGZpbHRlcnM6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgcGxheWxpc3REZXRhaWwoewogICAgICBpZDogaWQKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAvLyDmrYzmm7Lkv6Hmga8KICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzLnBsYXlsaXN0LnRyYWNrczsKICAgICAgX3RoaXMudGl0bGUgPSByZXMucGxheWxpc3QubmFtZTsKICAgICAgX3RoaXMuYXZhdGFyVXJsID0gcmVzLnBsYXlsaXN0LmNyZWF0b3IuYXZhdGFyVXJsOwogICAgICBfdGhpcy5jb3ZlckltZ1VybCA9IHJlcy5wbGF5bGlzdC5jb3ZlckltZ1VybDsKICAgICAgX3RoaXMuc2lnbmF0dXJlID0gcmVzLnBsYXlsaXN0LmNyZWF0b3Iuc2lnbmF0dXJlOwogICAgICBfdGhpcy5uaWNrbmFtZSA9IHJlcy5wbGF5bGlzdC5jcmVhdG9yLm5pY2tuYW1lOwogICAgICBfdGhpcy50YWdzID0gcmVzLnBsYXlsaXN0LnRhZ3M7CiAgICAgIF90aGlzLmNyZWF0ZVRpbWUgPSBtb21lbnQocmVzLnBsYXlsaXN0LmNyZWF0ZVRpbWUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpOwogICAgfSk7IC8vIOiOt+WPlueDremXqOivhOiuugoKICAgIGhvdENvbW1lbnRzKHsKICAgICAgaWQ6IGlkCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuaG90Q29tbWVudHMgPSByZXMuaG90Q29tbWVudHM7CiAgICB9KTsgLy8g6I635Y+W6K+E6K665L+h5oGvCgogICAgdGhpcy5nZXRDb21tZW50cygpOwogIH0sCiAgbWV0aG9kczogewogICAgdG9NVjogZnVuY3Rpb24gdG9NVihpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL212P2lkPSIuY29uY2F0KGlkKSk7CiAgICB9LAogICAgLy8g6I635Y+W5q2M5puy6K+E6K66CiAgICBnZXRDb21tZW50czogZnVuY3Rpb24gZ2V0Q29tbWVudHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7IC8vIOiOt+WPluatjOabsuivhOiuugoKICAgICAgbGlzdENvbW1lbnRzKHsKICAgICAgICBpZDogaWQsCiAgICAgICAgb2Zmc2V0OiAodGhpcy5wYWdlIC0gMSkgKiA1CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICBfdGhpczIuY29tbWVudHMgPSByZXMuY29tbWVudHM7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmhteeggeaUueWPmAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlID0gdmFsOwogICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICB9LAogICAgcGxheU11c2ljOiBmdW5jdGlvbiBwbGF5TXVzaWMoaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBzb25nVXJsKHsKICAgICAgICBpZDogaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgICAvLyB0aGlzLnNvbmdVcmwgPSByZXMuZGF0YVswXS51cmwKICAgICAgICBfdGhpczMuJHBhcmVudC51cmwgPSByZXMuZGF0YVswXS51cmw7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA,SAAA,cAAA,EAAA,YAAA,EAAA,WAAA,QAAA,gBAAA;AACA,SAAA,OAAA,QAAA,iBAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,GADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,SAAA,EAAA,EAJA;AAKA,MAAA,WAAA,EAAA,EALA;AAMA,MAAA,SAAA,EAAA,EANA;AAOA,MAAA,QAAA,EAAA,EAPA;AAQA,MAAA,IAAA,EAAA,EARA;AASA,MAAA,UAAA,EAAA,EATA;AAUA;AACA,MAAA,WAAA,EAAA,EAXA;AAYA;AACA,MAAA,QAAA,EAAA,EAbA;AAcA;AACA;AACA,MAAA,KAAA,EAAA,EAhBA;AAiBA;AACA,MAAA,IAAA,EAAA,CAlBA;AAmBA;AACA,MAAA,KAAA,EAAA;AApBA,KAAA;AAsBA,GAzBA;AA0BA,EAAA,OAAA,EAAA,EA1BA;AA2BA,EAAA,OA3BA,qBA2BA;AAAA;;AAAA,QACA,EADA,GACA,KAAA,MAAA,CAAA,KADA,CACA,EADA;AAEA,IAAA,cAAA,CAAA;AACA,MAAA,EAAA,EAAA;AADA,KAAA,CAAA,CAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA;AACA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,QAAA,CAAA,MAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,QAAA,CAAA,WAAA;AACA,MAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,QAAA,CAAA,OAAA,CAAA,QAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,UAAA,GAAA,MAAA,CAAA,GAAA,CAAA,QAAA,CAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AACA,KAbA,EAFA,CAgBA;;AACA,IAAA,WAAA,CAAA;AACA,MAAA,EAAA,EAAA;AADA,KAAA,CAAA,CAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,WAAA,GAAA,GAAA,CAAA,WAAA;AACA,KAJA,EAjBA,CAuBA;;AACA,SAAA,WAAA;AACA,GApDA;AAqDA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,EADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,kBAAA,EAAA;AACA,KAHA;AAIA;AACA,IAAA,WALA,yBAKA;AAAA;;AAAA,UACA,EADA,GACA,KAAA,MAAA,CAAA,KADA,CACA,EADA,EAEA;;AACA,MAAA,YAAA,CAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,MAAA,EAAA,CAAA,KAAA,IAAA,GAAA,CAAA,IAAA;AAFA,OAAA,CAAA,CAGA,IAHA,CAGA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,GAAA,CAAA,QAAA;AACA,OANA;AAOA,KAfA;AAgBA;AACA,IAAA,mBAjBA,+BAiBA,GAjBA,EAiBA;AACA,WAAA,IAAA,GAAA,GAAA;AACA,WAAA,WAAA;AACA,KApBA;AAqBA,IAAA,SArBA,qBAqBA,EArBA,EAqBA;AAAA;;AACA,MAAA,OAAA,CAAA;AACA,QAAA,EAAA,EAAA;AADA,OAAA,CAAA,CAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA;AACA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA;AACA,OANA;AAOA;AA7BA;AArDA,CAAA","sourcesContent":["<template>\r\n  <div class=\"playlist-container\">\r\n    <div class=\"top-wrap\">\r\n      <div class=\"img-wrap\">\r\n        <img :src=\"coverImgUrl\" alt=\"\" />\r\n      </div>\r\n      <div class=\"info-wrap\">\r\n        <p class=\"title\">{{ title }}</p>\r\n        <div class=\"author-wrap\">\r\n          <img class=\"avatar\" :src=\"avatarUrl\" alt=\"\" />\r\n          <span class=\"name\">{{ nickname }}</span>\r\n          <span class=\"time\">{{ createTime }} 创建</span>\r\n        </div>\r\n        <div class=\"tag-wrap\">\r\n          <span class=\"title\">标签:</span>\r\n          <ul>\r\n            <li v-for=\"item in tags\" :key=\"item\">{{ item }}</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"desc-wrap\">\r\n          <span class=\"title\">简介:</span>\r\n          <span class=\"desc\">{{ signature }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-tabs v-model=\"activeIndex\">\r\n      <el-tab-pane label=\"歌曲列表\" name=\"1\">\r\n        <table class=\"el-table playlit-table\">\r\n          <thead>\r\n            <th></th>\r\n            <th></th>\r\n            <th>音乐标题</th>\r\n            <th>歌手</th>\r\n            <th>专辑</th>\r\n            <th>时长</th>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              class=\"el-table__row\"\r\n              v-for=\"(item, index) in tableData\"\r\n              :key=\"item.id\"\r\n            >\r\n              <td>{{ index + 1 }}</td>\r\n              <td>\r\n                <div class=\"img-wrap\" @click=\"playMusic(item.id)\">\r\n                  <img :src=\"item.al.picUrl\" alt=\"\" />\r\n                  <span class=\"iconfont icon-play\"></span>\r\n                </div>\r\n              </td>\r\n              <td>\r\n                <div class=\"song-wrap\">\r\n                  <div class=\"name-wrap\">\r\n                    <span>{{ item.name }}</span>\r\n                    <!-- mv图标 -->\r\n                    <span v-if=\"item.mv != 0\" @click=\"toMV(item.mv)\" class=\"iconfont icon-mv\"></span>\r\n                  </div>\r\n                  <span>{{ item.subTitle }}</span>\r\n                </div>\r\n              </td>\r\n              <td>{{ item.ar[0].name }}</td>\r\n              <td>\r\n                {{ item.al.name }}\r\n              </td>\r\n              <td>{{ item.dt | formatDuration }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </el-tab-pane>\r\n      <el-tab-pane :label=\"`评论(${total + hotComments.length})`\" name=\"2\">\r\n        <!-- 热门评论 -->\r\n        <div v-if=\"hotComments.length != 0\" class=\"comment-wrap\">\r\n          <p class=\"title\">\r\n            热门评论<span class=\"number\">({{ hotComments.length }})</span>\r\n          </p>\r\n          <div\r\n            class=\"comments-wrap\"\r\n            v-for=\"item in hotComments\"\r\n            :key=\"item.commentId\"\r\n          >\r\n            <div class=\"item\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.content }}</span>\r\n                </div>\r\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\r\n                  <span class=\"name\"\r\n                    >{{ item.beReplied[0].user.nickname }}：</span\r\n                  >\r\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time | formatTime }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 最新评论 -->\r\n        <div class=\"comment-wrap\">\r\n          <p class=\"title\">\r\n            最新评论<span class=\"number\">({{ total }})</span>\r\n          </p>\r\n          <div v-if=\"comments.length != 0\" class=\"comments-wrap\">\r\n            <div class=\"item\" v-for=\"item in comments\" :key=\"item.commentId\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.content }}</span>\r\n                </div>\r\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\r\n                  <span class=\"name\"\r\n                    >{{ item.beReplied[0].user.nickname }}：</span\r\n                  >\r\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time | formatTime }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 分页器 -->\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          :current-page=\"page\"\r\n          :page-size=\"5\"\r\n        >\r\n        </el-pagination>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { playlistDetail, listComments, hotComments } from '@/api/playlist';\r\nimport { songUrl } from '@/api/discovery';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: 'playlist',\r\n  data() {\r\n    return {\r\n      activeIndex: '1',\r\n      tableData: [],\r\n      title: '',\r\n      avatarUrl: '',\r\n      coverImgUrl: '',\r\n      signature: '',\r\n      nickname: '',\r\n      tags: [],\r\n      createTime: '',\r\n      // 热门评论\r\n      hotComments: [],\r\n      // 普通评论\r\n      comments: [],\r\n      // 分页相关数据\r\n      // 每页数据\r\n      limit: 20,\r\n      // 页码\r\n      page: 1,\r\n      // 总条数\r\n      total: 0\r\n    };\r\n  },\r\n  filters: {},\r\n  created() {\r\n    const { id } = this.$route.query;\r\n    playlistDetail({\r\n      id\r\n    }).then(res => {\r\n      // window.console.log(res)\r\n      // 歌曲信息\r\n      this.tableData = res.playlist.tracks;\r\n      this.title = res.playlist.name;\r\n      this.avatarUrl = res.playlist.creator.avatarUrl;\r\n      this.coverImgUrl = res.playlist.coverImgUrl;\r\n      this.signature = res.playlist.creator.signature;\r\n      this.nickname = res.playlist.creator.nickname;\r\n      this.tags = res.playlist.tags;\r\n      this.createTime = moment(res.playlist.createTime).format('YYYY-MM-DD');\r\n    });\r\n    // 获取热门评论\r\n    hotComments({\r\n      id\r\n    }).then(res => {\r\n      this.hotComments = res.hotComments;\r\n    });\r\n\r\n    // 获取评论信息\r\n    this.getComments();\r\n  },\r\n  methods: {\r\n    toMV(id){\r\n      this.$router.push(`/mv?id=${id}`)\r\n    },\r\n    // 获取歌曲评论\r\n    getComments() {\r\n      const { id } = this.$route.query;\r\n      // 获取歌曲评论\r\n      listComments({\r\n        id,\r\n        offset: (this.page - 1) * 5\r\n      }).then(res => {\r\n        this.total = res.total;\r\n        this.comments = res.comments;\r\n      });\r\n    },\r\n    // 页码改变\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.getComments();\r\n    },\r\n    playMusic(id) {\r\n      songUrl({\r\n        id: id\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // this.songUrl = res.data[0].url\r\n        this.$parent.url = res.data[0].url;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n"],"sourceRoot":"src/views"}]}