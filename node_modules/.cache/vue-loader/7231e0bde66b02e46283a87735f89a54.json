{"remainingRequest":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/result.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/result.vue","mtime":1611062714544},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNlYXJjaCB9IGZyb20gJ0AvYXBpL3Jlc3VsdCc7CmltcG9ydCB7IHNvbmdVcmwgfSBmcm9tICdAL2FwaS9kaXNjb3ZlcnknOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Jlc3VsdCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICcxJywKICAgICAgLy8g6aG15a656YePCiAgICAgIGxpbWl0OiAxNSwKICAgICAgLy8g6aG156CBCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMCwKICAgICAgc29uZ0xpc3Q6IFtdLAogICAgICBwbGF5TGlzdDogW10sCiAgICAgIG12TGlzdDogW10KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdHlwZTogWwogICAgICBmdW5jdGlvbigpIHsKICAgICAgICB0aGlzLmxpbWl0ID0gdGhpcy50eXBlID09ICcxMDA0JyA/IDEyIDogMTU7CiAgICAgIH0sCiAgICAgICdzZWFyY2hSZXN1bHQnCiAgICBdLAogICAgJyRyb3V0ZS5xdWVyeS5rZXl3b3Jkcyc6ICdzZWFyY2hSZXN1bHQnCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zZWFyY2hSZXN1bHQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvUGxheWxpc3QoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9wbGF5bGlzdD9pZD0ke2lkfWApOwogICAgfSwKICAgIC8vIOWPjOWHu+afkOS4gOihjAogICAgcm93RGJjbGljayhpZCkgewogICAgICBzb25nVXJsKHsKICAgICAgICBpZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgICAvLyB0aGlzLnNvbmdVcmwgPSByZXMuZGF0YVswXS51cmwKICAgICAgICB0aGlzLiRwYXJlbnQudXJsID0gcmVzLmRhdGFbMF0udXJsOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDljrttdumhtemdogogICAgdG9NVihtdmlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvbXY/aWQ9JHttdmlkfWApOwogICAgfSwKICAgIC8vIOmhteeggeaUueWPmAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlID0gdmFsOwogICAgICB0aGlzLnNlYXJjaFJlc3VsdCgpOwogICAgfSwKICAgIHNlYXJjaFJlc3VsdCgpIHsKICAgICAgY29uc3QgeyBsaW1pdCwgdHlwZSB9ID0gdGhpczsKICAgICAgY29uc3QgeyBrZXl3b3JkcyB9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICAgIHNlYXJjaCh7CiAgICAgICAgbGltaXQsCiAgICAgICAgdHlwZSwKICAgICAgICBrZXl3b3JkcywKICAgICAgICBvZmZzZXQ6ICh0aGlzLnBhZ2UgLSAxKSAqIGxpbWl0CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgIC8vIOagueaNruexu+Wei+S4jeWQjAogICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7CiAgICAgICAgICBjYXNlICcxJzoKICAgICAgICAgICAgdGhpcy5zb25nTGlzdCA9IHJlcy5yZXN1bHQuc29uZ3M7CiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMucmVzdWx0LnNvbmdDb3VudDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICcxMDAwJzoKICAgICAgICAgICAgdGhpcy5wbGF5TGlzdCA9IHJlcy5yZXN1bHQucGxheWxpc3RzOwogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC5wbGF5bGlzdENvdW50OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB0aGlzLm12TGlzdCA9IHJlcy5yZXN1bHQubXZzOwogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC5tdkNvdW50OwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"result.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"result-container\" ref=\"container\">\n    <div class=\"title-wrap\">\n      <h2 class=\"title\">{{ $route.query.keywords }}</h2>\n      <span class=\"sub-title\">找到{{ total }}个结果</span>\n    </div>\n    <el-tabs v-model=\"type\">\n      <el-tab-pane label=\"歌曲\" name=\"1\">\n        <table class=\"el-table\">\n          <thead>\n            <th></th>\n            <th>音乐标题</th>\n            <th>歌手</th>\n            <th>专辑</th>\n            <th>时长</th>\n          </thead>\n          <tbody>\n            <tr\n              class=\"el-table__row\"\n              v-for=\"(item, index) in songList\"\n              :key=\"item.id\"\n              @dblclick=\"rowDbclick(item.id)\"\n            >\n              <td>{{ index + 1 }}</td>\n              <td>\n                <div class=\"song-wrap\">\n                  <div class=\"name-wrap\">\n                    <span class=\"name\">{{ item.name }}</span>\n                    <span\n                      v-if=\"item.mvid != 0\"\n                      class=\"iconfont icon-mv\"\n                      @click=\"toMV(item.mvid)\"\n                    ></span>\n                  </div>\n                  <span class=\"sub-name\" v-if=\"item.alias.length != 0\">{{\n                    item.alias[0]\n                  }}</span>\n                </div>\n              </td>\n              <td>{{ item.artists[0].name }}</td>\n              <td>{{ item.album.name }}</td>\n              <td>{{ item.duration | formatDuration }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </el-tab-pane>\n      <el-tab-pane label=\"歌单\" name=\"1000\">\n        <div class=\"items\">\n          <div\n            class=\"item\"\n            v-for=\"item in playList\"\n            :key=\"item.id\"\n            @click=\"toPlaylist(item.id)\"\n          >\n            <div class=\"img-wrap\">\n              <div class=\"num-wrap\">\n                播放量:\n                <span class=\"num\">{{ item.playCount | formatCount }}</span>\n              </div>\n              <img :src=\"item.coverImgUrl\" alt=\"\" />\n              <span class=\"iconfont icon-play\"></span>\n            </div>\n            <p class=\"name\">{{ item.name }}</p>\n          </div>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"MV\" name=\"1004\">\n        <div class=\"items mv\">\n          <div\n            class=\"item\"\n            v-for=\"item in mvList\"\n            :key=\"item.id\"\n            @click=\"toMV(item.id)\"\n          >\n            <div class=\"img-wrap\">\n              <img :src=\"item.cover\" alt=\"\" />\n              <span class=\"iconfont icon-play\"></span>\n              <div class=\"num-wrap\">\n                <div class=\"iconfont icon-play\"></div>\n                <div class=\"num\">{{ item.playCount | formatCount }}</div>\n              </div>\n              <span class=\"time\">{{ item.duration | formatDuration }}</span>\n            </div>\n            <div class=\"info-wrap\">\n              <div class=\"name\">{{ item.name }}</div>\n              <div class=\"singer\">{{ item.artistName }}</div>\n            </div>\n          </div>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n    <!-- 分页器 -->\n    <el-pagination\n      @current-change=\"handleCurrentChange\"\n      background\n      layout=\"prev, pager, next\"\n      :total=\"total\"\n      :current-page=\"page\"\n      :page-size=\"limit\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport { search } from '@/api/result';\nimport { songUrl } from '@/api/discovery';\nexport default {\n  name: 'result',\n  data() {\n    return {\n      type: '1',\n      // 页容量\n      limit: 15,\n      // 页码\n      page: 1,\n      // 总条数\n      total: 0,\n      songList: [],\n      playList: [],\n      mvList: []\n    };\n  },\n  watch: {\n    type: [\n      function() {\n        this.limit = this.type == '1004' ? 12 : 15;\n      },\n      'searchResult'\n    ],\n    '$route.query.keywords': 'searchResult'\n  },\n  created() {\n    this.searchResult();\n  },\n  methods: {\n    toPlaylist(id) {\n      this.$router.push(`/playlist?id=${id}`);\n    },\n    // 双击某一行\n    rowDbclick(id) {\n      songUrl({\n        id\n      }).then(res => {\n        // window.console.log(res)\n        // this.songUrl = res.data[0].url\n        this.$parent.url = res.data[0].url;\n      });\n    },\n    // 去mv页面\n    toMV(mvid) {\n      this.$router.push(`/mv?id=${mvid}`);\n    },\n    // 页码改变\n    handleCurrentChange(val) {\n      this.page = val;\n      this.searchResult();\n    },\n    searchResult() {\n      const { limit, type } = this;\n      const { keywords } = this.$route.query;\n      search({\n        limit,\n        type,\n        keywords,\n        offset: (this.page - 1) * limit\n      }).then(res => {\n        // window.console.log(res)\n        // 根据类型不同\n        switch (this.type) {\n          case '1':\n            this.songList = res.result.songs;\n            this.total = res.result.songCount;\n            break;\n          case '1000':\n            this.playList = res.result.playlists;\n            this.total = res.result.playlistCount;\n            break;\n\n          default:\n            this.mvList = res.result.mvs;\n            this.total = res.result.mvCount;\n            break;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\"></style>\n"]}]}