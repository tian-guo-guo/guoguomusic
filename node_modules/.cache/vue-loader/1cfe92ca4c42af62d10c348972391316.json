{"remainingRequest":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\result.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\result.vue","mtime":1582968164881},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5yZXN1bHQtY29udGFpbmVyIHsNCiAgLnRpdGxlLXdyYXAgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgYWxpZ24taXRlbXM6IGZsZXgtZW5kOw0KICAgIG1hcmdpbi1ib3R0b206IDMwcHg7DQogICAgLnRpdGxlIHsNCiAgICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgICB9DQogICAgLnN1Yi10aXRsZSB7DQogICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICBjb2xvcjogI2JlYmViZTsNCiAgICB9DQogIH0NCiAgLmVsLXRhYnNfX2l0ZW0gew0KICAgIGZvbnQtc2l6ZTogMThweDsNCiAgfQ0KICAuZWwtdGFibGUgdGQsDQogIC5lbC10YWJsZSB0aC5pcy1sZWFmIHsNCiAgICBib3JkZXItYm90dG9tOiBub25lOw0KICB9DQogIC5pdGVtcyB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0Ow0KICAgIC5pdGVtIHsNCiAgICAgIHdpZHRoOiAyMDBweDsNCiAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgIG1hcmdpbi1yaWdodDogMjBweDsNCiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7DQogICAgICAuaW1nLXdyYXAgew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICA+IC5pY29uLXBsYXkgew0KICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICB0b3A6IDUwJTsNCiAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogICAgICAgICAgd2lkdGg6IDQwcHg7DQogICAgICAgICAgaGVpZ2h0OiA0MHB4Ow0KICAgICAgICAgIGNvbG9yOiAjZGQ2ZDYwOw0KICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsNCiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsNCiAgICAgICAgICBvcGFjaXR5OiAwOw0KICAgICAgICAgICY6OmJlZm9yZSB7DQogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoM3B4KTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgJjpob3ZlciA+IC5pY29uLXBsYXkgew0KICAgICAgICAgIG9wYWNpdHk6IDE7DQogICAgICAgIH0NCiAgICAgICAgaW1nIHsNCiAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7DQogICAgICAgIH0NCiAgICAgICAgLm51bS13cmFwIHsNCiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgIHRvcDogMDsNCiAgICAgICAgICByaWdodDogMDsNCiAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgZm9udC1zaXplOiAxNXB4Ow0KICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDVweDsNCiAgICAgICAgICBwYWRkaW5nLXRvcDogMnB4Ow0KICAgICAgICAgIC5pY29uLXBsYXkgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLnRpbWUgew0KICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICBib3R0b206IDVweDsNCiAgICAgICAgICByaWdodDogNXB4Ow0KICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC5uYW1lIHsNCiAgICAgICAgZm9udC1zaXplOiAxNXB4Ow0KICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgZGlzcGxheTogLXdlYmtpdC1ib3g7DQogICAgICAgIC13ZWJraXQtYm94LW9yaWVudDogdmVydGljYWw7DQogICAgICAgIC13ZWJraXQtbGluZS1jbGFtcDogMjsNCiAgICAgIH0NCiAgICAgIC5pbmZvLXdyYXAgew0KICAgICAgICAuc2luZ2VyIHsNCiAgICAgICAgICBmb250LXNpemU6IDE1cHg7DQogICAgICAgICAgY29sb3I6ICNiZWJlYmU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"result.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"result-container\" ref=\"container\">\r\n    <div class=\"title-wrap\">\r\n      <h2 class=\"title\">{{ $route.query.keywords }}</h2>\r\n      <span class=\"sub-title\">找到{{ total }}个结果</span>\r\n    </div>\r\n    <el-tabs v-model=\"type\">\r\n      <el-tab-pane label=\"歌曲\" name=\"1\">\r\n        <el-table\r\n          stripe\r\n          class=\"song-table\"\r\n          :data=\"songList\"\r\n          @row-dblclick=\"rowDbclick\"\r\n        >\r\n          <el-table-column type=\"index\"></el-table-column>\r\n          <el-table-column width=\"280\" label=\"音乐标题\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"song-wrap\">\r\n                <div class=\"name-wrap\">\r\n                  <span>{{ scope.row.name }}</span>\r\n                  <span\r\n                    v-if=\"scope.row.mvid != 0\"\r\n                    class=\"iconfont icon-mv\"\r\n                    @click=\"toMV(scope.row.mvid)\"\r\n                  ></span>\r\n                </div>\r\n                <span v-if=\"scope.row.alias.length != 0\">{{\r\n                  scope.row.alias[0]\r\n                }}</span>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column width=\"280\" label=\"歌手\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.artists[0].name }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column width=\"280\" label=\"专辑\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.album.name }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"时长\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.duration | formatDuration }}\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"歌单\" name=\"1000\">\r\n        <div class=\"items\">\r\n          <div\r\n            class=\"item\"\r\n            v-for=\"item in playList\"\r\n            :key=\"item.id\"\r\n            @click=\"toPlaylist(item.id)\"\r\n          >\r\n            <div class=\"img-wrap\">\r\n              <div class=\"num-wrap\">\r\n                播放量:\r\n                <span class=\"num\">{{ item.playCount | formatCount }}</span>\r\n              </div>\r\n              <img :src=\"item.coverImgUrl\" alt=\"\" />\r\n              <span class=\"iconfont icon-play\"></span>\r\n            </div>\r\n            <p class=\"name\">{{ item.name }}</p>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"MV\" name=\"1004\">\r\n        <div class=\"items\">\r\n          <div\r\n            class=\"item\"\r\n            v-for=\"item in mvList\"\r\n            :key=\"item.id\"\r\n            @click=\"toMV(item.id)\"\r\n          >\r\n            <div class=\"img-wrap\">\r\n              <img :src=\"item.cover\" alt=\"\" />\r\n              <span class=\"iconfont icon-play\"></span>\r\n              <div class=\"num-wrap\">\r\n                <div class=\"iconfont icon-play\"></div>\r\n                <div class=\"num\">{{ item.playCount | formatCount }}</div>\r\n              </div>\r\n              <span class=\"time\">{{ item.duration | formatDuration }}</span>\r\n            </div>\r\n            <div class=\"info-wrap\">\r\n              <div class=\"name\">{{ item.name }}</div>\r\n              <div class=\"singer\">{{ item.artistName }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <!-- 分页器 -->\r\n    <el-pagination\r\n      @current-change=\"handleCurrentChange\"\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      :current-page=\"page\"\r\n      :page-size=\"limit\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { search } from '@/api/result';\r\nimport { songUrl } from '@/api/discovery';\r\nexport default {\r\n  name: 'result',\r\n  data() {\r\n    return {\r\n      type: '1',\r\n      // 页容量\r\n      limit: 30,\r\n      // 页码\r\n      page: 1,\r\n      // 总条数\r\n      total: 0,\r\n      songList: [],\r\n      playList: [],\r\n      mvList: []\r\n    };\r\n  },\r\n  watch: {\r\n    type: 'searchResult',\r\n    '$route.query.keywords': 'searchResult'\r\n  },\r\n  created() {\r\n    this.searchResult();\r\n  },\r\n  methods: {\r\n    toPlaylist(id) {\r\n      this.$router.push(`/playlist?id=${id}`);\r\n    },\r\n    // 双击某一行\r\n    rowDbclick(row) {\r\n      songUrl({\r\n        id: row.id\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // this.songUrl = res.data[0].url\r\n        this.$parent.url = res.data[0].url;\r\n      });\r\n    },\r\n    // 去mv页面\r\n    toMV(mvid) {\r\n      this.$router.push(`/mv?id=${mvid}`);\r\n    },\r\n    // 页码改变\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.searchResult();\r\n    },\r\n    searchResult() {\r\n      const { limit, type } = this;\r\n      const { keywords } = this.$route.query;\r\n      search({\r\n        limit,\r\n        type,\r\n        keywords,\r\n        offset: (this.page - 1) * this.limit\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // 根据类型不同\r\n        switch (this.type) {\r\n          case '1':\r\n            this.songList = res.result.songs;\r\n            this.total = res.result.songCount;\r\n            break;\r\n          case '1000':\r\n            this.playList = res.result.playlists;\r\n            this.total = res.result.playlistCount;\r\n            break;\r\n\r\n          default:\r\n            this.mvList = res.result.mvs;\r\n            this.total = res.result.mvCount;\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.result-container {\r\n  .title-wrap {\r\n    display: flex;\r\n    align-items: flex-end;\r\n    margin-bottom: 30px;\r\n    .title {\r\n      margin-right: 10px;\r\n    }\r\n    .sub-title {\r\n      font-size: 15px;\r\n      color: #bebebe;\r\n    }\r\n  }\r\n  .el-tabs__item {\r\n    font-size: 18px;\r\n  }\r\n  .el-table td,\r\n  .el-table th.is-leaf {\r\n    border-bottom: none;\r\n  }\r\n  .items {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: flex-start;\r\n    .item {\r\n      width: 200px;\r\n      cursor: pointer;\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      .img-wrap {\r\n        width: 100%;\r\n        position: relative;\r\n        > .icon-play {\r\n          position: absolute;\r\n          top: 50%;\r\n          left: 50%;\r\n          transform: translate(-50%, -50%);\r\n          width: 40px;\r\n          height: 40px;\r\n          color: #dd6d60;\r\n          font-size: 20px;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          background: rgba(255, 255, 255, 0.8);\r\n          opacity: 0;\r\n          &::before {\r\n            transform: translateX(3px);\r\n          }\r\n        }\r\n        &:hover > .icon-play {\r\n          opacity: 1;\r\n        }\r\n        img {\r\n          width: 100%;\r\n          border-radius: 5px;\r\n        }\r\n        .num-wrap {\r\n          position: absolute;\r\n          color: white;\r\n          top: 0;\r\n          right: 0;\r\n          display: flex;\r\n          align-items: center;\r\n          font-size: 15px;\r\n          padding-right: 5px;\r\n          padding-top: 2px;\r\n          .icon-play {\r\n            font-size: 12px;\r\n            display: flex;\r\n            align-items: center;\r\n            margin-right: 5px;\r\n          }\r\n        }\r\n        .time {\r\n          position: absolute;\r\n          bottom: 5px;\r\n          right: 5px;\r\n          color: white;\r\n          font-size: 15px;\r\n        }\r\n      }\r\n      .name {\r\n        font-size: 15px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        display: -webkit-box;\r\n        -webkit-box-orient: vertical;\r\n        -webkit-line-clamp: 2;\r\n      }\r\n      .info-wrap {\r\n        .singer {\r\n          font-size: 15px;\r\n          color: #bebebe;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}