{"remainingRequest":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/playlist.vue","mtime":1611106405418},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHBsYXlsaXN0RGV0YWlsLCBsaXN0Q29tbWVudHMsIGhvdENvbW1lbnRzIH0gZnJvbSAnQC9hcGkvcGxheWxpc3QnOwppbXBvcnQgeyBzb25nVXJsIH0gZnJvbSAnQC9hcGkvZGlzY292ZXJ5JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3BsYXlsaXN0JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aXZlSW5kZXg6ICcxJywKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdGl0bGU6ICcnLAogICAgICBhdmF0YXJVcmw6ICcnLAogICAgICBjb3ZlckltZ1VybDogJycsCiAgICAgIHNpZ25hdHVyZTogJycsCiAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgdGFnczogW10sCiAgICAgIGNyZWF0ZVRpbWU6ICcnLAogICAgICAvLyDng63pl6jor4TorroKICAgICAgaG90Q29tbWVudHM6IFtdLAogICAgICAvLyDmma7pgJror4TorroKICAgICAgY29tbWVudHM6IFtdLAogICAgICAvLyDliIbpobXnm7jlhbPmlbDmja4KICAgICAgLy8g5q+P6aG15pWw5o2uCiAgICAgIGxpbWl0OiAyMCwKICAgICAgLy8g6aG156CBCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMAogICAgfTsKICB9LAogIGZpbHRlcnM6IHt9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB7IGlkIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgIHBsYXlsaXN0RGV0YWlsKHsKICAgICAgaWQKICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcykKICAgICAgLy8g5q2M5puy5L+h5oGvCiAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLnBsYXlsaXN0LnRyYWNrczsKICAgICAgdGhpcy50aXRsZSA9IHJlcy5wbGF5bGlzdC5uYW1lOwogICAgICB0aGlzLmF2YXRhclVybCA9IHJlcy5wbGF5bGlzdC5jcmVhdG9yLmF2YXRhclVybDsKICAgICAgdGhpcy5jb3ZlckltZ1VybCA9IHJlcy5wbGF5bGlzdC5jb3ZlckltZ1VybDsKICAgICAgdGhpcy5zaWduYXR1cmUgPSByZXMucGxheWxpc3QuY3JlYXRvci5zaWduYXR1cmU7CiAgICAgIHRoaXMubmlja25hbWUgPSByZXMucGxheWxpc3QuY3JlYXRvci5uaWNrbmFtZTsKICAgICAgdGhpcy50YWdzID0gcmVzLnBsYXlsaXN0LnRhZ3M7CiAgICAgIHRoaXMuY3JlYXRlVGltZSA9IG1vbWVudChyZXMucGxheWxpc3QuY3JlYXRlVGltZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7CiAgICB9KTsKICAgIC8vIOiOt+WPlueDremXqOivhOiuugogICAgaG90Q29tbWVudHMoewogICAgICBpZAogICAgfSkudGhlbihyZXMgPT4gewogICAgICB0aGlzLmhvdENvbW1lbnRzID0gcmVzLmhvdENvbW1lbnRzOwogICAgfSk7CgogICAgLy8g6I635Y+W6K+E6K665L+h5oGvCiAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0b01WKGlkKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9tdj9pZD0ke2lkfWApCiAgICB9LAogICAgLy8g6I635Y+W5q2M5puy6K+E6K66CiAgICBnZXRDb21tZW50cygpIHsKICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICAgIC8vIOiOt+WPluatjOabsuivhOiuugogICAgICBsaXN0Q29tbWVudHMoewogICAgICAgIGlkLAogICAgICAgIG9mZnNldDogKHRoaXMucGFnZSAtIDEpICogNQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICB0aGlzLmNvbW1lbnRzID0gcmVzLmNvbW1lbnRzOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpobXnoIHmlLnlj5gKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnZSA9IHZhbDsKICAgICAgdGhpcy5nZXRDb21tZW50cygpOwogICAgfSwKICAgIHBsYXlNdXNpYyhpZCkgewogICAgICBzb25nVXJsKHsKICAgICAgICBpZDogaWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpCiAgICAgICAgLy8gdGhpcy5zb25nVXJsID0gcmVzLmRhdGFbMF0udXJsCiAgICAgICAgdGhpcy4kcGFyZW50LnVybCA9IHJlcy5kYXRhWzBdLnVybDsKICAgICAgfSk7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"playlist.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"playlist-container\">\n    <div class=\"top-wrap\">\n      <div class=\"img-wrap\">\n        <img :src=\"coverImgUrl\" alt=\"\" />\n      </div>\n      <div class=\"info-wrap\">\n        <p class=\"title\">{{ title }}</p>\n        <div class=\"author-wrap\">\n          <img class=\"avatar\" :src=\"avatarUrl\" alt=\"\" />\n          <span class=\"name\">{{ nickname }}</span>\n          <span class=\"time\">{{ createTime }} 创建</span>\n        </div>\n        <div class=\"tag-wrap\">\n          <span class=\"title\">标签:</span>\n          <ul>\n            <li v-for=\"item in tags\" :key=\"item\">{{ item }}</li>\n          </ul>\n        </div>\n        <div class=\"desc-wrap\">\n          <span class=\"title\">简介:</span>\n          <span class=\"desc\">{{ signature }}</span>\n        </div>\n      </div>\n    </div>\n    <el-tabs v-model=\"activeIndex\">\n      <el-tab-pane label=\"歌曲列表\" name=\"1\">\n        <table class=\"el-table playlit-table\">\n          <thead>\n            <th></th>\n            <th></th>\n            <th>音乐标题</th>\n            <th>歌手</th>\n            <th>专辑</th>\n            <th>时长</th>\n          </thead>\n          <tbody>\n            <tr\n              class=\"el-table__row\"\n              v-for=\"(item, index) in tableData\"\n              :key=\"item.id\"\n            >\n              <td>{{ index + 1 }}</td>\n              <td>\n                <div class=\"img-wrap\" @click=\"playMusic(item.id)\">\n                  <img :src=\"item.al.picUrl\" alt=\"\" />\n                  <span class=\"iconfont icon-play\"></span>\n                </div>\n              </td>\n              <td>\n                <div class=\"song-wrap\">\n                  <div class=\"name-wrap\">\n                    <span>{{ item.name }}</span>\n                    <!-- mv图标 -->\n                    <span v-if=\"item.mv != 0\" @click=\"toMV(item.mv)\" class=\"iconfont icon-mv\"></span>\n                  </div>\n                  <span>{{ item.subTitle }}</span>\n                </div>\n              </td>\n              <td>{{ item.ar[0].name }}</td>\n              <td>\n                {{ item.al.name }}\n              </td>\n              <td>{{ item.dt | formatDuration }}</td>\n            </tr>\n          </tbody>\n        </table>\n      </el-tab-pane>\n      <el-tab-pane :label=\"`评论(${total + hotComments.length})`\" name=\"2\">\n        <!-- 热门评论 -->\n        <div v-if=\"hotComments.length != 0\" class=\"comment-wrap\">\n          <p class=\"title\">\n            热门评论<span class=\"number\">({{ hotComments.length }})</span>\n          </p>\n          <div\n            class=\"comments-wrap\"\n            v-for=\"item in hotComments\"\n            :key=\"item.commentId\"\n          >\n            <div class=\"item\">\n              <div class=\"icon-wrap\">\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\n              </div>\n              <div class=\"content-wrap\">\n                <div class=\"content\">\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\n                  <span class=\"comment\">{{ item.content }}</span>\n                </div>\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\n                  <span class=\"name\"\n                    >{{ item.beReplied[0].user.nickname }}：</span\n                  >\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n                </div>\n                <div class=\"date\">{{ item.time | formatTime }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- 最新评论 -->\n        <div class=\"comment-wrap\">\n          <p class=\"title\">\n            最新评论<span class=\"number\">({{ total }})</span>\n          </p>\n          <div v-if=\"comments.length != 0\" class=\"comments-wrap\">\n            <div class=\"item\" v-for=\"item in comments\" :key=\"item.commentId\">\n              <div class=\"icon-wrap\">\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\n              </div>\n              <div class=\"content-wrap\">\n                <div class=\"content\">\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\n                  <span class=\"comment\">{{ item.content }}</span>\n                </div>\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\n                  <span class=\"name\"\n                    >{{ item.beReplied[0].user.nickname }}：</span\n                  >\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n                </div>\n                <div class=\"date\">{{ item.time | formatTime }}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- 分页器 -->\n        <el-pagination\n          @current-change=\"handleCurrentChange\"\n          background\n          layout=\"prev, pager, next\"\n          :total=\"total\"\n          :current-page=\"page\"\n          :page-size=\"5\"\n        >\n        </el-pagination>\n      </el-tab-pane>\n    </el-tabs>\n  </div>\n</template>\n\n<script>\nimport { playlistDetail, listComments, hotComments } from '@/api/playlist';\nimport { songUrl } from '@/api/discovery';\nimport moment from 'moment';\nexport default {\n  name: 'playlist',\n  data() {\n    return {\n      activeIndex: '1',\n      tableData: [],\n      title: '',\n      avatarUrl: '',\n      coverImgUrl: '',\n      signature: '',\n      nickname: '',\n      tags: [],\n      createTime: '',\n      // 热门评论\n      hotComments: [],\n      // 普通评论\n      comments: [],\n      // 分页相关数据\n      // 每页数据\n      limit: 20,\n      // 页码\n      page: 1,\n      // 总条数\n      total: 0\n    };\n  },\n  filters: {},\n  created() {\n    const { id } = this.$route.query;\n    playlistDetail({\n      id\n    }).then(res => {\n      // window.console.log(res)\n      // 歌曲信息\n      this.tableData = res.playlist.tracks;\n      this.title = res.playlist.name;\n      this.avatarUrl = res.playlist.creator.avatarUrl;\n      this.coverImgUrl = res.playlist.coverImgUrl;\n      this.signature = res.playlist.creator.signature;\n      this.nickname = res.playlist.creator.nickname;\n      this.tags = res.playlist.tags;\n      this.createTime = moment(res.playlist.createTime).format('YYYY-MM-DD');\n    });\n    // 获取热门评论\n    hotComments({\n      id\n    }).then(res => {\n      this.hotComments = res.hotComments;\n    });\n\n    // 获取评论信息\n    this.getComments();\n  },\n  methods: {\n    toMV(id){\n      this.$router.push(`/mv?id=${id}`)\n    },\n    // 获取歌曲评论\n    getComments() {\n      const { id } = this.$route.query;\n      // 获取歌曲评论\n      listComments({\n        id,\n        offset: (this.page - 1) * 5\n      }).then(res => {\n        this.total = res.total;\n        this.comments = res.comments;\n      });\n    },\n    // 页码改变\n    handleCurrentChange(val) {\n      this.page = val;\n      this.getComments();\n    },\n    playMusic(id) {\n      songUrl({\n        id: id\n      }).then(res => {\n        // window.console.log(res)\n        // this.songUrl = res.data[0].url\n        this.$parent.url = res.data[0].url;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\"></style>\n"]}]}