{"remainingRequest":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\playlist.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\playlist.vue","mtime":1582797554125},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwbGF5bGlzdERldGFpbCwgbGlzdENvbW1lbnRzIH0gZnJvbSAnQC9hcGkvcGxheWxpc3QnOw0KaW1wb3J0IHsgc29uZ1VybCB9IGZyb20gJ0AvYXBpL2Rpc2NvdmVyeSc7DQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ3BsYXlsaXN0JywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYWN0aXZlSW5kZXg6ICcxJywNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICB0aXRsZTogJycsDQogICAgICBhdmF0YXJVcmw6ICcnLA0KICAgICAgY292ZXJJbWdVcmw6ICcnLA0KICAgICAgc2lnbmF0dXJlOiAnJywNCiAgICAgIG5pY2tuYW1lOiAnJywNCiAgICAgIHRhZ3M6IFtdLA0KICAgICAgY3JlYXRlVGltZTogJycsDQogICAgICAvLyDng63pl6jor4TorroNCiAgICAgIGhvdENvbW1lbnRzOiBbXSwNCiAgICAgIC8vIOaZrumAmuivhOiuug0KICAgICAgY29tbWVudHM6IFtdLA0KICAgICAgLy8g5YiG6aG155u45YWz5pWw5o2uDQogICAgICAvLyDmr4/pobXmlbDmja4NCiAgICAgIGxpbWl0OiAyMCwNCiAgICAgIC8vIOmhteeggQ0KICAgICAgcGFnZTogMSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDANCiAgICB9Ow0KICB9LA0KICBmaWx0ZXJzOiB7DQogIA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbnN0IHsgaWQgfSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Ow0KICAgIHBsYXlsaXN0RGV0YWlsKHsNCiAgICAgIGlkDQogICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcykNCiAgICAgIC8vIOatjOabsuS/oeaBrw0KICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMucGxheWxpc3QudHJhY2tzOw0KICAgICAgdGhpcy50aXRsZSA9IHJlcy5wbGF5bGlzdC5uYW1lOw0KICAgICAgdGhpcy5hdmF0YXJVcmwgPSByZXMucGxheWxpc3QuY3JlYXRvci5hdmF0YXJVcmw7DQogICAgICB0aGlzLmNvdmVySW1nVXJsID0gcmVzLnBsYXlsaXN0LmNvdmVySW1nVXJsOw0KICAgICAgdGhpcy5zaWduYXR1cmUgPSByZXMucGxheWxpc3QuY3JlYXRvci5zaWduYXR1cmU7DQogICAgICB0aGlzLm5pY2tuYW1lID0gcmVzLnBsYXlsaXN0LmNyZWF0b3Iubmlja25hbWU7DQogICAgICB0aGlzLnRhZ3MgPSByZXMucGxheWxpc3QudGFnczsNCiAgICAgIHRoaXMuY3JlYXRlVGltZSA9IG1vbWVudChyZXMucGxheWxpc3QuY3JlYXRlVGltZSkuZm9ybWF0KCdZWVlZLU1NLUREJyk7DQogICAgfSk7DQogICAgDQogICAgLy8g6I635Y+W6K+E6K665L+h5oGvDQogICAgdGhpcy5nZXRDb21tZW50cygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5q2M5puy6K+E6K66DQogICAgZ2V0Q29tbWVudHMoKSB7DQogICAgICBjb25zdCB7IGlkIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeTsNCiAgICAgIC8vIOiOt+WPluatjOabsuivhOiuug0KICAgICAgbGlzdENvbW1lbnRzKHsNCiAgICAgICAgaWQsDQogICAgICAgIG9mZnNldDogKHRoaXMucGFnZSAtIDEpICogNQ0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnRvdGFsOw0KICAgICAgICB0aGlzLmhvdENvbW1lbnRzID0gcmVzLmhvdENvbW1lbnRzOw0KICAgICAgICB0aGlzLmNvbW1lbnRzID0gcmVzLmNvbW1lbnRzOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDpobXnoIHmlLnlj5gNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlID0gdmFsOw0KICAgICAgdGhpcy5nZXRDb21tZW50cygpOw0KICAgIH0sDQogICAgcGxheU11c2ljKGlkKSB7DQogICAgICBzb25nVXJsKHsNCiAgICAgICAgaWQ6IGlkDQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpDQogICAgICAgIC8vIHRoaXMuc29uZ1VybCA9IHJlcy5kYXRhWzBdLnVybA0KICAgICAgICB0aGlzLiRwYXJlbnQudXJsID0gcmVzLmRhdGFbMF0udXJsOw0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["playlist.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"playlist.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"playlist-container\">\r\n    <div class=\"top-wrap\">\r\n      <div class=\"img-wrap\">\r\n        <img :src=\"coverImgUrl\" alt=\"\" />\r\n      </div>\r\n      <div class=\"info-wrap\">\r\n        <p class=\"title\">{{ title }}</p>\r\n        <div class=\"author-wrap\">\r\n          <img class=\"avatar\" :src=\"avatarUrl\" alt=\"\" />\r\n          <span class=\"name\">{{ nickname }}</span>\r\n          <span class=\"time\">{{ createTime }} 创建</span>\r\n        </div>\r\n        <div class=\"play-wrap\">\r\n          <span class=\"iconfont icon-circle-play\"></span>\r\n          <span class=\"text\">播放全部</span>\r\n        </div>\r\n        <div class=\"tag-wrap\">\r\n          <span class=\"title\">标签:</span>\r\n          <ul>\r\n            <li v-for=\"item in tags\" :key=\"item\">{{ item }}</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"desc-wrap\">\r\n          <span class=\"title\">简介:</span>\r\n          <span class=\"desc\">{{ signature }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <el-tabs v-model=\"activeIndex\">\r\n      <el-tab-pane label=\"歌曲列表\" name=\"1\">\r\n        <el-table class=\"song-table\" :data=\"tableData\">\r\n          <el-table-column type=\"index\"></el-table-column>\r\n          <el-table-column width=\"100\" label=\"\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"img-wrap\" @click=\"playMusic(scope.row.id)\">\r\n                <img :src=\"scope.row.al.picUrl\" alt=\"\" />\r\n                <span class=\"iconfont icon-play\"></span>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"音乐标题\">\r\n            <template slot-scope=\"scope\">\r\n              <div class=\"song-wrap\">\r\n                <div class=\"name-wrap\">\r\n                  <span>{{ scope.row.name }}</span>\r\n                  <span\r\n                    v-if=\"scope.row.mv != 0\"\r\n                    class=\"iconfont icon-mv\"\r\n                  ></span>\r\n                </div>\r\n                <span>{{ scope.row.subTitle }}</span>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column width=\"280\" label=\"歌手\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.ar[0].name }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column width=\"280\" prop=\"albumName\" label=\"专辑\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.al.name }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"duration\" label=\"时长\">\r\n            <template slot-scope=\"scope\">\r\n              {{ scope.row.dt | formatDuration }}\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n      <el-tab-pane :label=\"`评论(${total + hotComments.length})`\" name=\"2\">\r\n        <!-- 精彩评论 -->\r\n        <div v-if=\"hotComments.length != 0\" class=\"comment-wrap\">\r\n          <p class=\"title\">\r\n            精彩评论<span class=\"number\">({{ hotComments.length }})</span>\r\n          </p>\r\n          <div\r\n            class=\"comments-wrap\"\r\n            v-for=\"item in hotComments\"\r\n            :key=\"item.commentId\"\r\n          >\r\n            <div class=\"item\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.content }}</span>\r\n                </div>\r\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\r\n                  <span class=\"name\"\r\n                    >{{ item.beReplied[0].user.nickname }}：</span\r\n                  >\r\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time | formatTime }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 最新评论 -->\r\n        <div class=\"comment-wrap\">\r\n          <p class=\"title\">\r\n            最新评论<span class=\"number\">({{ total }})</span>\r\n          </p>\r\n          <div v-if=\"comments.length != 0\" class=\"comments-wrap\">\r\n            <div class=\"item\" v-for=\"item in comments\" :key=\"item.commentId\">\r\n              <div class=\"icon-wrap\">\r\n                <img :src=\"item.user.avatarUrl\" alt=\"\" />\r\n              </div>\r\n              <div class=\"content-wrap\">\r\n                <div class=\"content\">\r\n                  <span class=\"name\">{{ item.user.nickname }}：</span>\r\n                  <span class=\"comment\">{{ item.content }}</span>\r\n                </div>\r\n                <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\r\n                  <span class=\"name\"\r\n                    >{{ item.beReplied[0].user.nickname }}：</span\r\n                  >\r\n                  <span class=\"comment\">{{ item.beReplied[0].content }}</span>\r\n                </div>\r\n                <div class=\"date\">{{ item.time | formatTime }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 分页器 -->\r\n        <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          background\r\n          layout=\"prev, pager, next\"\r\n          :total=\"total\"\r\n          :current-page=\"page\"\r\n          :page-size=\"5\"\r\n        >\r\n        </el-pagination>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { playlistDetail, listComments } from '@/api/playlist';\r\nimport { songUrl } from '@/api/discovery';\r\nimport moment from 'moment'\r\nexport default {\r\n  name: 'playlist',\r\n  data() {\r\n    return {\r\n      activeIndex: '1',\r\n      tableData: [],\r\n      title: '',\r\n      avatarUrl: '',\r\n      coverImgUrl: '',\r\n      signature: '',\r\n      nickname: '',\r\n      tags: [],\r\n      createTime: '',\r\n      // 热门评论\r\n      hotComments: [],\r\n      // 普通评论\r\n      comments: [],\r\n      // 分页相关数据\r\n      // 每页数据\r\n      limit: 20,\r\n      // 页码\r\n      page: 1,\r\n      // 总条数\r\n      total: 0\r\n    };\r\n  },\r\n  filters: {\r\n  \r\n  },\r\n  created() {\r\n    const { id } = this.$route.query;\r\n    playlistDetail({\r\n      id\r\n    }).then(res => {\r\n      // window.console.log(res)\r\n      // 歌曲信息\r\n      this.tableData = res.playlist.tracks;\r\n      this.title = res.playlist.name;\r\n      this.avatarUrl = res.playlist.creator.avatarUrl;\r\n      this.coverImgUrl = res.playlist.coverImgUrl;\r\n      this.signature = res.playlist.creator.signature;\r\n      this.nickname = res.playlist.creator.nickname;\r\n      this.tags = res.playlist.tags;\r\n      this.createTime = moment(res.playlist.createTime).format('YYYY-MM-DD');\r\n    });\r\n    \r\n    // 获取评论信息\r\n    this.getComments();\r\n  },\r\n  methods: {\r\n    // 获取歌曲评论\r\n    getComments() {\r\n      const { id } = this.$route.query;\r\n      // 获取歌曲评论\r\n      listComments({\r\n        id,\r\n        offset: (this.page - 1) * 5\r\n      }).then(res => {\r\n        this.total = res.total;\r\n        this.hotComments = res.hotComments;\r\n        this.comments = res.comments;\r\n      });\r\n    },\r\n    // 页码改变\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.getComments();\r\n    },\r\n    playMusic(id) {\r\n      songUrl({\r\n        id: id\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // this.songUrl = res.data[0].url\r\n        this.$parent.url = res.data[0].url;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.playlist-container {\r\n  margin: auto;\r\n  padding-top: 40px;\r\n  .top-wrap {\r\n    display: flex;\r\n    span {\r\n      font-size: 17px;\r\n    }\r\n    .img-wrap {\r\n      margin-right: 30px;\r\n      img {\r\n        width: 230px;\r\n        height: 230px;\r\n      }\r\n    }\r\n    .info-wrap {\r\n      .title {\r\n        margin-bottom: 20px;\r\n      }\r\n      .author-wrap {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-bottom: 25px;\r\n        img {\r\n          width: 35px;\r\n          height: 35px;\r\n          border-radius: 50%;\r\n          margin-right: 10px;\r\n        }\r\n        .name {\r\n          margin-right: 10px;\r\n        }\r\n        .time {\r\n          font-size: 14px;\r\n        }\r\n      }\r\n      .play-wrap {\r\n        width: 120px;\r\n        height: 35px;\r\n        border-radius: 4px;\r\n        background: linear-gradient(to right, #e85e4d, #c6483c);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-bottom: 25px;\r\n        span {\r\n          color: white;\r\n          &.iconfont {\r\n            margin-right: 8px;\r\n          }\r\n          &.text {\r\n            font-size: 16px;\r\n          }\r\n        }\r\n      }\r\n      .tag-wrap {\r\n        display: flex;\r\n        margin-bottom: 15px;\r\n        span {\r\n          margin: 0;\r\n        }\r\n        ul {\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        li {\r\n          font-size: 15px;\r\n          &:not(:last-child)::after {\r\n            content: '/';\r\n            margin: 0 4px;\r\n          }\r\n        }\r\n      }\r\n      .desc-wrap {\r\n        span {\r\n          &:last-child {\r\n            font-size: 15px;\r\n          }\r\n        }\r\n      }\r\n      span:first-child {\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .comment-wrap {\r\n    margin-bottom: 70px;\r\n    .title {\r\n      font-size: 20px;\r\n      .number {\r\n        color: black;\r\n        font-size: 18px;\r\n      }\r\n    }\r\n    .item {\r\n      display: flex;\r\n      padding-top: 20px;\r\n      .icon-wrap {\r\n        margin-right: 15px;\r\n        img {\r\n          width: 50px;\r\n          height: 50px;\r\n          border-radius: 50%;\r\n        }\r\n      }\r\n      &:not(:last-child) {\r\n        .content-wrap {\r\n          border-bottom: 1px solid #f2f2f1;\r\n        }\r\n      }\r\n      .date {\r\n        color: #bebebe;\r\n        font-size: 14px;\r\n      }\r\n\r\n      .content-wrap {\r\n        padding-bottom: 20px;\r\n\r\n        flex: 1;\r\n        .name {\r\n          color: #517eaf;\r\n          font-size: 14px;\r\n        }\r\n        .comment {\r\n          font-size: 14px;\r\n        }\r\n        .content,\r\n        .re-content {\r\n          margin-bottom: 10px;\r\n        }\r\n        .re-content {\r\n          padding: 10px;\r\n          background-color: #e6e5e6;\r\n          border-radius: 5px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}