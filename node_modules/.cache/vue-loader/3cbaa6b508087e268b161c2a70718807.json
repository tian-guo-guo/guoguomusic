{"remainingRequest":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/mv.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/src/views/mv.vue","mtime":1611110705682},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/suntian/Downloads/videos/Vue音乐播放器-带你进阶Vue技术栈-手把手教你打造自己的音乐播放器/vue进阶，打造音乐播放器资料/公开课-day04/webmusic-study/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG12VXJsLCBzaW1pTVYsIG12Q29tbWVudHMsIG12RGV0YWlsLCBhcnRpc3RJbmZvIH0gZnJvbSAnQC9hcGkvbXYnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ212JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gbXblnLDlnYAKICAgICAgbXZVcmw6ICcnLAogICAgICBzaW1pTVY6IFtdLAogICAgICAvLyDng63pl6jor4TorroKICAgICAgaG90Q29tbWVudHM6IFtdLAogICAgICAvLyDmma7pgJror4TorroKICAgICAgY29tbWVudHM6IFtdLAogICAgICAvLyDliIbpobXnm7jlhbPmlbDmja4KICAgICAgLy8g5q+P6aG15pWw5o2uCiAgICAgIGxpbWl0OiAyMCwKICAgICAgLy8g6aG156CBCiAgICAgIHBhZ2U6IDEsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMCwKICAgICAgLy8gbXbnmoTlkI3lrZcKICAgICAgbXZOYW1lOiAnJywKICAgICAgLy8g5pKt5pS+5qyh5pWwCiAgICAgIHBsYXlDb3VudDogJycsCiAgICAgIC8vIOWPkeW4g+aXtumXtAogICAgICBwdWJsaXNoVGltZTogJycsCiAgICAgIC8vIOaPj+i/sAogICAgICBkZXNjOiAnJywKICAgICAgLy8g5q2M5omL5ZCNCiAgICAgIGFydGlzdE5hbWU6ICcnLAogICAgICAvLyDlsIHpnaIKICAgICAgYXJ0aXN0Q292ZXI6ICcnCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOmhteeggeaUueWPmAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlID0gdmFsOwogICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICB9LAogICAgLy8g6I635Y+W6K+E6K66CiAgICBnZXRDb21tZW50cygpIHsKICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICAgIG12Q29tbWVudHMoeyBpZCwgb2Zmc2V0OiAodGhpcy5wYWdlIC0gMSkgKiA1IH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgIGlmIChyZXMuaG90Q29tbWVudHMpIHsKICAgICAgICAgIHRoaXMuaG90Q29tbWVudHMgPSByZXMuaG90Q29tbWVudHM7CiAgICAgICAgfQogICAgICAgIHRoaXMuY29tbWVudHMgPSByZXMuY29tbWVudHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W5L+h5oGvCiAgICBnZXRJbmZvKCkgewogICAgICBjb25zdCB7IGlkIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeTsKICAgICAgbXZVcmwoeyBpZCB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5tdlVybCA9IHJlcy5kYXRhLnVybDsKICAgICAgfSk7CiAgICAgIHNpbWlNVih7IG12aWQ6IGlkIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2cocmVzKQogICAgICAgIHRoaXMuc2ltaU1WID0gcmVzLm12czsKICAgICAgfSk7CiAgICAgIC8vIOiOt+WPluivhOiuugogICAgICB0aGlzLmdldENvbW1lbnRzKCk7CiAgICAgIC8vIOiOt+WPlk1W6K+m5oOFCiAgICAgIG12RGV0YWlsKHsgbXZpZDogaWQgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubXZOYW1lID0gcmVzLmRhdGEubmFtZTsKICAgICAgICB0aGlzLnBsYXlDb3VudCA9IHJlcy5kYXRhLnBsYXlDb3VudDsKICAgICAgICB0aGlzLnB1Ymxpc2hUaW1lID0gcmVzLmRhdGEucHVibGlzaFRpbWU7CiAgICAgICAgdGhpcy5kZXNjID0gcmVzLmRhdGEuZGVzYzsKICAgICAgICBhcnRpc3RJbmZvKHsKICAgICAgICAgIGFydGlzdElkOiByZXMuZGF0YS5hcnRpc3RJZAogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIC8vIOatjOaJi+WQjQogICAgICAgICAgdGhpcy5hcnRpc3ROYW1lID0gcmVzLmFydGlzdC5uYW1lOwogICAgICAgICAgdGhpcy5hcnRpc3RDb3ZlciA9IHJlcy5hcnRpc3QucGljVXJsOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliIfmjaJtdgogICAgdG9NVihpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL212P2lkPSR7aWR9YCk7CiAgICB9CiAgfSwKICAvLyDkvqblkKzlmagKICB3YXRjaDogewogICAgJyRyb3V0ZS5xdWVyeS5pZCcoKSB7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0SW5mbygpOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0SW5mbygpOwogIH0KfTsK"},{"version":3,"sources":["mv.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mv.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"mv-container\">\n    <div class=\"mv-wrap\">\n      <h3 class=\"title\">mv详情</h3>\n      <!-- mv -->\n      <div class=\"video-wrap\">\n        <video controls :src=\"mvUrl\"></video>\n      </div>\n      <!-- mv信息 -->\n      <div class=\"info-wrap\">\n        <div class=\"singer-info\">\n          <div class='avatar-wrap'>\n            <img :src=\"artistCover\" alt=\"\" />\n          </div>\n          <span class=\"name\">{{ artistName }}</span>\n        </div>\n        <div class=\"mv-info\">\n          <h2 class=\"title\">{{ mvName }}</h2>\n          <span class=\"date\">发布：{{ publishTime }}</span>\n          <span class=\"number\">播放：{{ playCount | formatCount }}次</span>\n          <p class=\"desc\">{{ desc }}</p>\n        </div>\n      </div>\n      <!-- 热门评论 -->\n      <div v-if=\"hotComments.length != 0\" class=\"comment-wrap\">\n        <p class=\"title\">\n          热门评论<span class=\"number\">({{ hotComments.length }})</span>\n        </p>\n        <div\n          class=\"comments-wrap\"\n          v-for=\"item in hotComments\"\n          :key=\"item.commentId\"\n        >\n          <div class=\"item\">\n            <div class=\"icon-wrap\">\n              <img :src=\"item.user.avatarUrl\" alt=\"\" />\n            </div>\n            <div class=\"content-wrap\">\n              <div class=\"content\">\n                <span class=\"name\">{{ item.user.nickname }}：</span>\n                <span class=\"comment\">{{ item.content }}</span>\n              </div>\n              <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\n                <span class=\"name\"\n                  >{{ item.beReplied[0].user.nickname }}：</span\n                >\n                <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n              </div>\n              <div class=\"date\">{{ item.time | formatTime }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 最新评论 -->\n      <!-- 最新评论 -->\n      <div class=\"comment-wrap\" v-if=\"comments.length != 0\">\n        <p class=\"title\">\n          最新评论<span class=\"number\">({{ total }})</span>\n        </p>\n        <div class=\"comments-wrap\">\n          <div class=\"item\" v-for=\"item in comments\" :key=\"item.commentId\">\n            <div class=\"icon-wrap\">\n              <img :src=\"item.user.avatarUrl\" alt=\"\" />\n            </div>\n            <div class=\"content-wrap\">\n              <div class=\"content\">\n                <span class=\"name\">{{ item.user.nickname }}：</span>\n                <span class=\"comment\">{{ item.content }}</span>\n              </div>\n              <div v-if=\"item.beReplied.length != 0\" class=\"re-content\">\n                <span class=\"name\"\n                  >{{ item.beReplied[0].user.nickname }}：</span\n                >\n                <span class=\"comment\">{{ item.beReplied[0].content }}</span>\n              </div>\n              <div class=\"date\">{{ item.time | formatTime }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 分页器 -->\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        background\n        layout=\"prev, pager, next\"\n        :total=\"total\"\n        :current-page=\"page\"\n        :page-size=\"5\"\n      >\n      </el-pagination>\n    </div>\n    <div class=\"mv-recommend\">\n      <h3 class=\"title\">相关推荐</h3>\n      <div class=\"mvs\">\n        <div class=\"items\" v-for=\"item in simiMV\" :key=\"item.id\">\n          <div class=\"item\" @click=\"toMV(item.id)\">\n            <div class=\"img-wrap\">\n              <img :src=\"item.cover\" alt=\"\" />\n              <span class=\"iconfont icon-play\"></span>\n              <div class=\"num-wrap\">\n                <div class=\"iconfont icon-play\"></div>\n                <div class=\"num\">{{ item.playCount | formatCount }}</div>\n              </div>\n              <span class=\"time\">{{ item.duration | formatDuration }}</span>\n            </div>\n            <div class=\"info-wrap\">\n              <div class=\"name\">{{ item.name }}</div>\n              <div class=\"singer\">{{ item.artistName }}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mvUrl, simiMV, mvComments, mvDetail, artistInfo } from '@/api/mv';\nexport default {\n  name: 'mv',\n  data() {\n    return {\n      // mv地址\n      mvUrl: '',\n      simiMV: [],\n      // 热门评论\n      hotComments: [],\n      // 普通评论\n      comments: [],\n      // 分页相关数据\n      // 每页数据\n      limit: 20,\n      // 页码\n      page: 1,\n      // 总条数\n      total: 0,\n      // mv的名字\n      mvName: '',\n      // 播放次数\n      playCount: '',\n      // 发布时间\n      publishTime: '',\n      // 描述\n      desc: '',\n      // 歌手名\n      artistName: '',\n      // 封面\n      artistCover: ''\n    };\n  },\n\n  methods: {\n    // 页码改变\n    handleCurrentChange(val) {\n      this.page = val;\n      this.getComments();\n    },\n    // 获取评论\n    getComments() {\n      const { id } = this.$route.query;\n      mvComments({ id, offset: (this.page - 1) * 5 }).then(res => {\n        // window.console.log(res)\n        if (res.hotComments) {\n          this.hotComments = res.hotComments;\n        }\n        this.comments = res.comments;\n        this.total = res.total;\n      });\n    },\n    // 获取信息\n    getInfo() {\n      const { id } = this.$route.query;\n      mvUrl({ id }).then(res => {\n        this.mvUrl = res.data.url;\n      });\n      simiMV({ mvid: id }).then(res => {\n        // window.console.log(res)\n        this.simiMV = res.mvs;\n      });\n      // 获取评论\n      this.getComments();\n      // 获取MV详情\n      mvDetail({ mvid: id }).then(res => {\n        this.mvName = res.data.name;\n        this.playCount = res.data.playCount;\n        this.publishTime = res.data.publishTime;\n        this.desc = res.data.desc;\n        artistInfo({\n          artistId: res.data.artistId\n        }).then(res => {\n          // 歌手名\n          this.artistName = res.artist.name;\n          this.artistCover = res.artist.picUrl;\n        });\n      });\n    },\n    // 切换mv\n    toMV(id) {\n      this.$router.push(`/mv?id=${id}`);\n    }\n  },\n  // 侦听器\n  watch: {\n    '$route.query.id'() {\n      this.page = 1;\n      this.getInfo();\n    }\n  },\n  created() {\n    this.getInfo();\n  }\n};\n</script>\n\n<style lang=\"scss\"></style>\n"]}]}