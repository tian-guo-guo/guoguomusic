{"remainingRequest":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\result.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\src\\views\\result.vue","mtime":1583206817100},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\hulinghao\\Desktop\\公开课\\01.项目\\webmusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBzZWFyY2ggfSBmcm9tICdAL2FwaS9yZXN1bHQnOw0KaW1wb3J0IHsgc29uZ1VybCB9IGZyb20gJ0AvYXBpL2Rpc2NvdmVyeSc7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdyZXN1bHQnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0eXBlOiAnMScsDQogICAgICAvLyDpobXlrrnph48NCiAgICAgIGxpbWl0OiAxNSwNCiAgICAgIC8vIOmhteeggQ0KICAgICAgcGFnZTogMSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDAsDQogICAgICBzb25nTGlzdDogW10sDQogICAgICBwbGF5TGlzdDogW10sDQogICAgICBtdkxpc3Q6IFtdDQogICAgfTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB0eXBlOiBbDQogICAgICBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5saW1pdCA9IHRoaXMudHlwZSA9PSAnMTAwNCcgPyAxMiA6IDE1Ow0KICAgICAgfSwNCiAgICAgICdzZWFyY2hSZXN1bHQnDQogICAgXSwNCiAgICAnJHJvdXRlLnF1ZXJ5LmtleXdvcmRzJzogJ3NlYXJjaFJlc3VsdCcNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnNlYXJjaFJlc3VsdCgpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgdG9QbGF5bGlzdChpZCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9wbGF5bGlzdD9pZD0ke2lkfWApOw0KICAgIH0sDQogICAgLy8g5Y+M5Ye75p+Q5LiA6KGMDQogICAgcm93RGJjbGljayhpZCkgew0KICAgICAgc29uZ1VybCh7DQogICAgICAgIGlkDQogICAgICB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpDQogICAgICAgIC8vIHRoaXMuc29uZ1VybCA9IHJlcy5kYXRhWzBdLnVybA0KICAgICAgICB0aGlzLiRwYXJlbnQudXJsID0gcmVzLmRhdGFbMF0udXJsOw0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyDljrttdumhtemdog0KICAgIHRvTVYobXZpZCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9tdj9pZD0ke212aWR9YCk7DQogICAgfSwNCiAgICAvLyDpobXnoIHmlLnlj5gNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlID0gdmFsOw0KICAgICAgdGhpcy5zZWFyY2hSZXN1bHQoKTsNCiAgICB9LA0KICAgIHNlYXJjaFJlc3VsdCgpIHsNCiAgICAgIGNvbnN0IHsgbGltaXQsIHR5cGUgfSA9IHRoaXM7DQogICAgICBjb25zdCB7IGtleXdvcmRzIH0gPSB0aGlzLiRyb3V0ZS5xdWVyeTsNCiAgICAgIHNlYXJjaCh7DQogICAgICAgIGxpbWl0LA0KICAgICAgICB0eXBlLA0KICAgICAgICBrZXl3b3JkcywNCiAgICAgICAgb2Zmc2V0OiAodGhpcy5wYWdlIC0gMSkgKiBsaW1pdA0KICAgICAgfSkudGhlbihyZXMgPT4gew0KICAgICAgICAvLyB3aW5kb3cuY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAvLyDmoLnmja7nsbvlnovkuI3lkIwNCiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsNCiAgICAgICAgICBjYXNlICcxJzoNCiAgICAgICAgICAgIHRoaXMuc29uZ0xpc3QgPSByZXMucmVzdWx0LnNvbmdzOw0KICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5yZXN1bHQuc29uZ0NvdW50Ow0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgY2FzZSAnMTAwMCc6DQogICAgICAgICAgICB0aGlzLnBsYXlMaXN0ID0gcmVzLnJlc3VsdC5wbGF5bGlzdHM7DQogICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLnJlc3VsdC5wbGF5bGlzdENvdW50Ow0KICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICBkZWZhdWx0Og0KICAgICAgICAgICAgdGhpcy5tdkxpc3QgPSByZXMucmVzdWx0Lm12czsNCiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXMucmVzdWx0Lm12Q291bnQ7DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["result.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"result.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"result-container\" ref=\"container\">\r\n    <div class=\"title-wrap\">\r\n      <h2 class=\"title\">{{ $route.query.keywords }}</h2>\r\n      <span class=\"sub-title\">找到{{ total }}个结果</span>\r\n    </div>\r\n    <el-tabs v-model=\"type\">\r\n      <el-tab-pane label=\"歌曲\" name=\"1\">\r\n        <table class=\"el-table\">\r\n          <thead>\r\n            <th></th>\r\n            <th>音乐标题</th>\r\n            <th>歌手</th>\r\n            <th>专辑</th>\r\n            <th>时长</th>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              class=\"el-table__row\"\r\n              v-for=\"(item, index) in songList\"\r\n              :key=\"item.id\"\r\n              @dblclick=\"rowDbclick(item.id)\"\r\n            >\r\n              <td>{{ index + 1 }}</td>\r\n              <td>\r\n                <div class=\"song-wrap\">\r\n                  <div class=\"name-wrap\">\r\n                    <span class=\"name\">{{ item.name }}</span>\r\n                    <span\r\n                      v-if=\"item.mvid != 0\"\r\n                      class=\"iconfont icon-mv\"\r\n                      @click=\"toMV(item.mvid)\"\r\n                    ></span>\r\n                  </div>\r\n                  <span class=\"sub-name\" v-if=\"item.alias.length != 0\">{{\r\n                    item.alias[0]\r\n                  }}</span>\r\n                </div>\r\n              </td>\r\n              <td>{{ item.artists[0].name }}</td>\r\n              <td>{{ item.album.name }}</td>\r\n              <td>{{ item.duration | formatDuration }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"歌单\" name=\"1000\">\r\n        <div class=\"items\">\r\n          <div\r\n            class=\"item\"\r\n            v-for=\"item in playList\"\r\n            :key=\"item.id\"\r\n            @click=\"toPlaylist(item.id)\"\r\n          >\r\n            <div class=\"img-wrap\">\r\n              <div class=\"num-wrap\">\r\n                播放量:\r\n                <span class=\"num\">{{ item.playCount | formatCount }}</span>\r\n              </div>\r\n              <img :src=\"item.coverImgUrl\" alt=\"\" />\r\n              <span class=\"iconfont icon-play\"></span>\r\n            </div>\r\n            <p class=\"name\">{{ item.name }}</p>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"MV\" name=\"1004\">\r\n        <div class=\"items mv\">\r\n          <div\r\n            class=\"item\"\r\n            v-for=\"item in mvList\"\r\n            :key=\"item.id\"\r\n            @click=\"toMV(item.id)\"\r\n          >\r\n            <div class=\"img-wrap\">\r\n              <img :src=\"item.cover\" alt=\"\" />\r\n              <span class=\"iconfont icon-play\"></span>\r\n              <div class=\"num-wrap\">\r\n                <div class=\"iconfont icon-play\"></div>\r\n                <div class=\"num\">{{ item.playCount | formatCount }}</div>\r\n              </div>\r\n              <span class=\"time\">{{ item.duration | formatDuration }}</span>\r\n            </div>\r\n            <div class=\"info-wrap\">\r\n              <div class=\"name\">{{ item.name }}</div>\r\n              <div class=\"singer\">{{ item.artistName }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <!-- 分页器 -->\r\n    <el-pagination\r\n      @current-change=\"handleCurrentChange\"\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      :current-page=\"page\"\r\n      :page-size=\"limit\"\r\n    >\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { search } from '@/api/result';\r\nimport { songUrl } from '@/api/discovery';\r\nexport default {\r\n  name: 'result',\r\n  data() {\r\n    return {\r\n      type: '1',\r\n      // 页容量\r\n      limit: 15,\r\n      // 页码\r\n      page: 1,\r\n      // 总条数\r\n      total: 0,\r\n      songList: [],\r\n      playList: [],\r\n      mvList: []\r\n    };\r\n  },\r\n  watch: {\r\n    type: [\r\n      function() {\r\n        this.limit = this.type == '1004' ? 12 : 15;\r\n      },\r\n      'searchResult'\r\n    ],\r\n    '$route.query.keywords': 'searchResult'\r\n  },\r\n  created() {\r\n    this.searchResult();\r\n  },\r\n  methods: {\r\n    toPlaylist(id) {\r\n      this.$router.push(`/playlist?id=${id}`);\r\n    },\r\n    // 双击某一行\r\n    rowDbclick(id) {\r\n      songUrl({\r\n        id\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // this.songUrl = res.data[0].url\r\n        this.$parent.url = res.data[0].url;\r\n      });\r\n    },\r\n    // 去mv页面\r\n    toMV(mvid) {\r\n      this.$router.push(`/mv?id=${mvid}`);\r\n    },\r\n    // 页码改变\r\n    handleCurrentChange(val) {\r\n      this.page = val;\r\n      this.searchResult();\r\n    },\r\n    searchResult() {\r\n      const { limit, type } = this;\r\n      const { keywords } = this.$route.query;\r\n      search({\r\n        limit,\r\n        type,\r\n        keywords,\r\n        offset: (this.page - 1) * limit\r\n      }).then(res => {\r\n        // window.console.log(res)\r\n        // 根据类型不同\r\n        switch (this.type) {\r\n          case '1':\r\n            this.songList = res.result.songs;\r\n            this.total = res.result.songCount;\r\n            break;\r\n          case '1000':\r\n            this.playList = res.result.playlists;\r\n            this.total = res.result.playlistCount;\r\n            break;\r\n\r\n          default:\r\n            this.mvList = res.result.mvs;\r\n            this.total = res.result.mvCount;\r\n            break;\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n"]}]}